{% extends "base.html" %}
{% block title%}Notion Repeat{% endblock %}
{% block content %}  

{% if recur %}
    <script>
        window.onload = function() {
            recur_options();
            date_visibility();
        };
    </script>
{% endif %}
<div class="container">
    <form method="POST" action="">
        <!-- Any Error Messages -->
        {% for message in get_flashed_messages() %}
            <div class="alert-error">{{ message }}</div>
        {% endfor %}

        <!-- Connect Form -->
        <h1 class="title">Repeat Notion</h1>
        <h2 class="subtitle">Connect to Notion</h2>
        <div class="field">
            <div class="control">
                {{ connect.hidden_tag() }}
                {{ connect.url(class="input", placeholder=connect.url.label.text) }}
            </div>
        </div>
        <ul class="errors">
            {% for error in connect.url.errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
        <div class="field">
            <div class="control">
                {{ connect.token(class="input", placeholder=connect.token.label.text) }}
            </div>
        </div>
        
        <!-- Recur Form -->
        <!-- {% if recur %}
            <h5>Recurring Settings</h5>
            {{ recur.types.label }}
            {{ recur.types(class="u-full-width", onchange="recur_options()") }}
            <div class="grid-container thirds" id="recur_settings">
                <div id="{{ recur.date_options.name }}_div">
                    {{ recur.date_options.label }}
                    {{ recur.date_options(class="u-full-width", onchange="date_visibility()") }}
                </div>
                <div id="{{ recur.start_date.name }}">
                    {{ recur.start_date.label }}
                    {{ recur.start_date(class="u-full-width") }}
                </div>
                <div id="{{ recur.end_date.name }}">
                    {{ recur.end_date.label }}
                    {{ recur.end_date(class="u-full-width") }}
                    <ul class="errors">
                        {% for error in recur.end_date.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                <div id="{{ recur.count.name }}">
                    {{ recur.count.label }}
                    {{ recur.count(class="u-full-width") }}
                </div>
            </div>
            <table class="u-full-width" id="recur_days">
                <thead>
                  <tr>
                    <th>{{ recur.Sun.label }}</th>
                    <th>{{ recur.M.label }}</th>
                    <th>{{ recur.Tu.label }}</th>
                    <th>{{ recur.W.label }}</th>
                    <th>{{ recur.Th.label }}</th>
                    <th>{{ recur.F.label }}</th>
                    <th>{{ recur.Sat.label }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th>{{ recur.Sun }}</th>
                    <th>{{ recur.M }}</th>
                    <ul class="errors">
                        {% for error in recur.M.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                    <th>{{ recur.Tu }}</th>
                    <th>{{ recur.W }}</th>
                    <th>{{ recur.Th }}</th>
                    <th>{{ recur.F }}</th>
                    <th>{{ recur.Sat }}</th>
                  </tr>
                </tbody>
            </table>
        {% endif %} -->
        

        {% if columns %}
            {% for field in columns if field.widget.input_type != 'hidden' %}
                {% if field.id == "email" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-at"></span> 
                            </span>
                        </div>
                    </div>
                {% elif field.id == "text" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-format-align-left"></span> 
                            </span>
                        </div>
                    </div>
                {% elif field.id == "url" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-link-variant"></span>
                            </span>
                        </div>
                <   /div> 
                {% elif field.id == "phone" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-phone"></span> 
                            </span>
                        </div>
                    </div>
                {% elif field.id == "select" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-arrow-down-drop-circle"></span>   
                            </span>
                        </div>
                </  div>                    
                {% elif field.id == "title" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-format-font"></span>   
                            </span>
                        </div>
                </  div>                    
                {% elif field.id == "multi_select" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-format-list-bulleted"></span>   
                            </span>
                        </div>
                </  div>                    
                {% elif field.id == "person" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-account-group"></span>  
                            </span>
                        </div>
                </  div>                     
                {% elif field.id == "number" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-pound"></span>
                            </span>
                        </div>
                    </div>
                {% elif field.id == "date" %}
                    <div id="field">
                        <div class="control has-icons-left">
                            {{ field(class="input", placeholder=field.label.text) }}
                            <span class="icon is-left">
                                <span class="mdi mdi-24px mdi-calendar-text"></span>
                            </span>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
        <div class="field">
                <div class="control">
                  {{ connect.submit(class="button") }} 
            </div>
        </div>
    </form>
</div>
{% endblock %}
